/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
apply plugin: "idea"

allprojects {
    apply plugin: "base"
}

task deleteNodeModules(type: Delete) {
    delete "node_modules"
}

clean.dependsOn("deleteNodeModules")

task buildUOD(type: Zip, dependsOn: subprojects.build) {
    println "UOD: \"${rootProject.name}.zip\" contains project(s): " + subprojects.name
    subprojects {
        from("${it.buildDir}/distribution/") {
            include '**/**'
        }
    }
    archiveFileName = "${rootProject.name}.zip"
    destinationDirectory = file('./build/distribution')
}

build.dependsOn('buildUOD')